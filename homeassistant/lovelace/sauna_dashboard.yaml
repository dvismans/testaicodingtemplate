title: Sauna Control
views:
  - title: Sauna Control
    path: sauna
    icon: mdi:hot-tub
    cards:
      - type: horizontal-stack
        cards:
          - type: gauge
            entity: sensor.phases_current_phase_l1
            name: L1
            min: 0
            max: 32
            severity:
              green: 0
              yellow: 20
              red: 25
            needle: true
          - type: gauge
            entity: sensor.phases_current_phase_l2
            name: L2
            min: 0
            max: 32
            severity:
              green: 0
              yellow: 20
              red: 25
            needle: true
          - type: gauge
            entity: sensor.phases_current_phase_l3
            name: L3
            min: 0
            max: 32
            severity:
              green: 0
              yellow: 20
              red: 25
            needle: true
      - type: button
        entity: switch.mcb_smart_switch_1
        name: Sauna MCB
        icon: mdi:power
        show_state: true
        tap_action:
          action: toggle
        hold_action:
          action: call-service
          service: script.sauna_emergency_shutdown
          confirmation:
            text: Emergency shutdown - are you sure?
      - type: glance
        show_name: true
        show_state: true
        show_icon: true
        entities:
          - entity: binary_sensor.sauna_door
            name: Door
          - entity: switch.shellyplus1_8813bfcf08c0_switch_0
            name: Ventilator
      - type: conditional
        conditions:
          - condition: state
            entity: timer.sauna_ventilator_delay_off
            state: active
        card:
          type: custom:timer-bar-card
          entity: timer.sauna_ventilator_delay_off
          name: Ventilator Timer
          icon: mdi:fan
      - type: thermostat
        entity: climate.vloerverwarming_thermostaat_tuinstudio
        name: Floor Heating
      - type: entities
        title: Settings
        show_header_toggle: false
        entities:
          - entity: input_number.sauna_amperage_threshold
            name: Amperage Threshold
          - entity: input_number.sauna_ventilator_delay_off_minutes
            name: Ventilator Delay (min)
          - entity: input_boolean.sauna_safety_shutdown_enabled
            name: Safety Shutdown
          - entity: input_boolean.sauna_floor_heating_control_enabled
            name: Floor Heating with Sauna
          - entity: input_boolean.sauna_notifications_enabled
            name: Notifications
      - type: entities
        entities:
          - type: button
            name: Test Notification
            icon: mdi:message-text
            action_name: Send
            tap_action:
              action: call-service
              service: script.sauna_test_notification
      - type: history-graph
        title: Temperature History
        hours_to_show: 24
        entities:
          - entity: sensor.sauna_temperature
            name: Sauna
          - entity: sensor.sauna_floor_temperature
            name: Floor
      - type: history-graph
        title: Phase Amperage
        hours_to_show: 2
        entities:
          - entity: sensor.phases_current_phase_l1
            name: L1
          - entity: sensor.phases_current_phase_l2
            name: L2
          - entity: sensor.phases_current_phase_l3
            name: L3
